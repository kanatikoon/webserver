<!DOCTYPE html>
<html lang="en">
  <nav class="topnav">  
    <a href="/" class="nav-brand">RETROPLACE</a>
    <a href="/" class="nav-link">Home</a>
    <a href="/search" class="nav-link">Search</a>
    <a href="/All_products" class="nav-link">All Product</a>
    <a href="#" onclick="signOut()" class="nav-link">Logout</a>
</nav>
<head>
<link rel="stylesheet" href="css/Search Result.css"/>
<meta charset="UTF-8">
<meta name="viewport" content="width=1080, shrink-to-fit=0">
<title>Retroplaces</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="header">
  <h1>Retroplaces</h1>
</div>

    <div class="grid-container" id="product-list">
        <!-- Product items will be dynamically added here -->
    </div>

<div class="footer">
  <p>Â© 2024 Retroplaces</p>
</div>

</body>
<script>
async function fetchProducts() {
    try {
        const response = await fetch("http://localhost:3030/product_info");
        const products = await response.json();

        const productList = document.getElementById("product-list");

        products.forEach(product => {
            const gridItem = document.createElement("div");

            const img = document.createElement("img");
            img.src = product.image_url;
            img.alt = product.title;
            img.classList.add("grid-item"); // Adding the "grid-item" class to the image

            // Create a hidden button with the product ID as the link
            const button = document.createElement("button");
            button.textContent = "View Product"; // You can customize the button text
            button.style.display = "none"; // Hide the button
            button.dataset.productId = product.id; // Set the product ID as a data attribute

            // Add an event listener to the image to show the button when clicked
            img.addEventListener("click", () => {
                const productId = button.dataset.productId;
                //window.location.href = `products/${productId}`; // Redirect to products/:id URL
                window.location.href = 'Detail_page.html';
            });

            // Append the button to the grid item
            gridItem.appendChild(button);

            const title = document.createElement("p");
            title.textContent = product.title;

            const price = document.createElement("p");
            price.textContent = "Price: " + product.price + " Baht";

            gridItem.appendChild(img);
            gridItem.appendChild(title);
            gridItem.appendChild(price);

            productList.appendChild(gridItem); // Append grid item directly to the product list container
        });
    } catch (error) {
        console.error("Error fetching products:", error);
    }
}

fetchProducts();






</script>
</html>
